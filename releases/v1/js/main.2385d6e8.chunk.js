(this["webpackJsonpmode-kepler"]=this["webpackJsonpmode-kepler"]||[]).push([[0],{1003:function(t,e){},1322:function(t,e,a){"use strict";a.r(e);a(830);var n,i=a(12),o=(a(0),a(142)),r=a(37),c=a(789),l=a.n(c),d=a(208),s=a(205),u=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=l.a.initialState({uiState:t.uiState,mapState:t.mapState,visState:t.visState,mapStyle:t.mapStyle,providerState:t.providerState});return Object(d.combineReducers)(Object(r.a)({keplerGl:a},e))},p=a(290),g=a(144),f="KEPLER_NO_CODE__MODAL_DIALOG__OPEN",v="KEPLER_NO_CODE__MODAL_DIALOG__CLOSE",m="KEPLER_NO_CODE__ORIGINAl_HTML_TAG__SET_META";!function(t){t.HTML_TAG_SAVE="HTML_TAG_SAVE"}(n||(n={}));var h=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=u(t,e);return Object(d.createStore)(a,{},Object(d.applyMiddleware)(s.taskMiddleware))}({},{keplerNoCode:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{modalDialog:{isOpened:!1,activeDialogId:null}},e=arguments.length>1?arguments[1]:void 0;return e.type===f?Object(r.a)(Object(r.a)({},t),{},{modalDialog:Object(r.a)(Object(r.a)({},t.modalDialog),{},{isOpened:!0,activeDialogId:e.modalId})}):e.type===v?Object(r.a)(Object(r.a)({},t),{},{modalDialog:Object(r.a)(Object(r.a)({},t.modalDialog),{},{isOpened:!1,activeDialogId:null})}):e.type===m?Object(r.a)(Object(r.a)({},t),{},{originalHtmlTag:Object(r.a)(Object(r.a)({},t.originalHtmlTag),{},{meta:e.payload})}):t}}),O="kepler-root",b=a(811),S=a(812),j=a.n(S),y=a(98);function x(t){var e=[{regex:/&/g,entity:"&amp;"},{regex:/>/g,entity:"&gt;"},{regex:/</g,entity:"&lt;"},{regex:/"/g,entity:"&quot;"},{regex:/\xe1/g,entity:"&aacute;"},{regex:/\xe9/g,entity:"&eacute;"},{regex:/\xed/g,entity:"&iacute;"},{regex:/\xf3/g,entity:"&oacute;"},{regex:/\xfa/g,entity:"&uacute;"}];for(var a in e)t=t.replace(e[a].regex,e[a].entity);return t}var w=function(){var t,e=(t=O,Object(o.useSelector)((function(e){return e.keplerGl[t]}))),a=Object(o.useSelector)((function(t){return t.keplerNoCode.originalHtmlTag})),n=Object(y.jsx)("div",{children:"Loading..."});if(e&&a){var i=j.a.getConfigToSave(e),r="<".concat(a.meta.tag,'\n    data-widget-type="kepler.gl"\n    data-mapbox-token="').concat(a.meta.mapboxToken,'"\n    data-width="').concat(a.meta.width,'"\n    data-height="').concat(a.meta.height,'"\n    data-vis-state="').concat(x(JSON.stringify(i.config.visState)),'"\n    data-map-state="').concat(x(JSON.stringify(i.config.mapState)),'"\n    data-map-style="').concat(x(JSON.stringify(i.config.mapStyle)),'"\n    onLoad="').concat(a.meta.onload,'"\n/>');n=Object(y.jsx)("code",{style:{whiteSpace:"pre"},children:r})}return Object(y.jsx)(g.StyledModalContent,{children:n})},E=function(){var t=Object(o.useSelector)((function(t){return t.keplerNoCode.modalDialog})),e=Object(y.jsx)("div",{children:"No active dialog"});return t.activeDialogId===n.HTML_TAG_SAVE&&(e=Object(y.jsx)(w,{})),Object(y.jsx)(g.Modal,{isOpen:t.isOpened,onCancel:function(){return function(){var t={type:v};h.dispatch(t)}()},children:Object(y.jsx)(g.StyledModalContent,{children:e})})},k=function(t){var e=function(t){var e=Object(g.SaveExportDropdownFactory)(Object(g.PanelHeaderDropdownFactory)()),a=Object(g.withState)([],(function(){var e,a,n,i;return{items:null===t||void 0===t||null===(e=t.sidePanel)||void 0===e||null===(a=e.header)||void 0===a||null===(n=a.share)||void 0===n||null===(i=n.dropdown)||void 0===i?void 0:i.buttons}}),{})(e);return Object(g.injectComponents)([[g.SaveExportDropdownFactory,function(){return a}]])}({sidePanel:{header:{share:{dropdown:{buttons:[{label:"toolbar.exportImage",icon:p.Icons.Picture,key:"image",onClick:function(t){return t.onExportImage}},{label:"toolbar.saveMap",icon:p.Icons.Save2,key:"save",onClick:function(){return function(){return function(t){var e={type:f,modalId:t};h.dispatch(e)}(n.HTML_TAG_SAVE)}}}]}}}}});return Promise.resolve().then((function(){h.dispatch(Object(b.addDataToMap)({datasets:t.dataSets,option:Object(r.a)({centerMap:!0,readOnly:!1},t.dataDisplayOptions||{}),config:{visState:t.keplerState.visState,mapStyle:t.keplerState.mapStyle,mapState:t.keplerState.mapState}})),function(t){var e={type:m,payload:t};h.dispatch(e)}(t.originalHtmlTagMeta)})),Object(y.jsxs)("div",{children:[Object(y.jsx)(e,{id:O,mapboxApiAccessToken:t.mapboxApiAccessToken,width:t.width,height:t.height}),Object(y.jsx)(E,{})]})},_=a(84),T=a.n(_),D=function(t,e){var a=Object(y.jsx)(o.Provider,{store:h,children:Object(y.jsx)(k,{mapboxApiAccessToken:e.mapboxApiAccessToken,width:e.width,height:e.height,dataSets:e.dataSets,dataDisplayOptions:e.dataDisplayOptions,originalHtmlTagMeta:e.originalHtmlTagMeta,keplerState:{uiState:e.uiState,visState:e.visState,mapState:e.mapState,mapStyle:e.mapStyle}})});T.a.render(a,t)},A=function(t){var e=null,a=null;try{e=JSON.parse(t)}catch(n){a=n}return[a,e]};(function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,1368)).then((function(e){var a=e.getCLS,n=e.getFID,i=e.getFCP,o=e.getLCP,r=e.getTTFB;a(t),n(t),i(t),o(t),r(t)}))})(console.log),window.initKepler=function(t,e){var a=t.dataset.mapboxToken;if(!a)throw new Error("Element ".concat(t.id,' has not "data-mapbox-token" attribute'));var n=t.dataset.width||"1600",o=Number.parseInt(n);if(!o&&o<0)throw new Error("Element ".concat(t.id,' attribute "data-width" has incorrect value, it should be positive integer'));var r=t.dataset.height||"800",c=Number.parseInt(r);if(!c&&c<0)throw new Error("Element ".concat(t.id,' attribute "data-height" has incorrect value, it should be positive integer'));var l=null;if(t.dataset.visState){var d=A(t.dataset.visState),s=Object(i.a)(d,2),u=s[0],p=s[1];if(u)throw new Error("Element ".concat(t.id,' has invalid "data-vis-state" attribute'));l=p}var g=null;if(t.dataset.mapState){var f=A(t.dataset.mapState),v=Object(i.a)(f,2),m=v[0],h=v[1];if(m)throw new Error("Element ".concat(t.id,' has invalid "data-map-state" attribute'));g=h}var O=null;if(t.dataset.mapStyle){var b=A(t.dataset.mapStyle),S=Object(i.a)(b,2),j=S[0],y=S[1];if(j)throw new Error("Element ".concat(t.id,' has invalid "data-map-style" attribute'));O=y}var x=t.onload.toString(),w=x.substring(x.indexOf("{")+1,x.lastIndexOf("}")).replace(/\n/g,"");D(t,{mapboxApiAccessToken:a,width:o,height:c,visState:l,mapState:g,mapStyle:O,dataSets:e,originalHtmlTagMeta:{tag:t.tagName,mapboxToken:a,width:o,height:c,onload:w}})},document.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll("[data-widget-type='kepler.gl']").forEach((function(t){return t.onload()}))}))},307:function(t,e){},308:function(t,e){},310:function(t,e){},518:function(t,e){},519:function(t,e){},520:function(t,e){},521:function(t,e){},522:function(t,e){},523:function(t,e){},524:function(t,e){},556:function(t,e){},557:function(t,e){},558:function(t,e){},795:function(t,e){},796:function(t,e){},797:function(t,e){},798:function(t,e){},830:function(t,e,a){},950:function(t,e){},983:function(t,e,a){var n={"./":40,"./ca":593,"./ca.js":593,"./cn":594,"./cn.js":594,"./en":431,"./en.js":431,"./es":595,"./es.js":595,"./fi":596,"./fi.js":596,"./formatted-message":432,"./formatted-message.js":432,"./index":40,"./index.js":40,"./ja":597,"./ja.js":597,"./locales":117,"./locales.js":117,"./pt":598,"./pt.js":598,"./ru":599,"./ru.js":599};function i(t){var e=o(t);return a(e)}function o(t){if(!a.o(n,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return n[t]}i.keys=function(){return Object.keys(n)},i.resolve=o,t.exports=i,i.id=983}},[[1322,1,2]]]);
//# sourceMappingURL=main.2385d6e8.chunk.js.map