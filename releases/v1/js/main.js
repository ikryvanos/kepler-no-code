(this["webpackJsonpmode-kepler"]=this["webpackJsonpmode-kepler"]||[]).push([[0],{1003:function(t,e){},1322:function(t,e,a){"use strict";a.r(e);var n,o=a(12),i=(a(0),a(142)),r=a(37),c=a(790),l=a.n(c),d=a(208),s=a(205),u=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=l.a.initialState({uiState:t.uiState,mapState:t.mapState,visState:t.visState,mapStyle:t.mapStyle,providerState:t.providerState});return Object(d.combineReducers)(Object(r.a)({keplerGl:a},e))},p=a(291),g=a(144),m=a(282),f="KEPLER_NO_CODE__MODAL_DIALOG__OPEN",v="KEPLER_NO_CODE__MODAL_DIALOG__CLOSE",O="KEPLER_NO_CODE__ORIGINAl_HTML_TAG__SET_META";!function(t){t.HTML_TAG_SAVE="HTML_TAG_SAVE"}(n||(n={}));var h=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=u(t,e);return Object(d.createStore)(a,{},Object(d.applyMiddleware)(s.taskMiddleware))}({},{keplerNoCode:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{modalDialog:{isOpened:!1,activeDialogId:null}},e=arguments.length>1?arguments[1]:void 0;return e.type===f?Object(r.a)(Object(r.a)({},t),{},{modalDialog:Object(r.a)(Object(r.a)({},t.modalDialog),{},{isOpened:!0,activeDialogId:e.modalId})}):e.type===v?Object(r.a)(Object(r.a)({},t),{},{modalDialog:Object(r.a)(Object(r.a)({},t.modalDialog),{},{isOpened:!1,activeDialogId:null})}):e.type===O?Object(r.a)(Object(r.a)({},t),{},{originalHtmlTag:Object(r.a)(Object(r.a)({},t.originalHtmlTag),{},{meta:e.payload})}):t}}),b="kepler-root",S=a(812),j=a(813),y=a.n(j),w=a(98);function x(t){var e=[{regex:/&/g,entity:"&amp;"},{regex:/>/g,entity:"&gt;"},{regex:/</g,entity:"&lt;"},{regex:/"/g,entity:"&quot;"},{regex:/\xe1/g,entity:"&aacute;"},{regex:/\xe9/g,entity:"&eacute;"},{regex:/\xed/g,entity:"&iacute;"},{regex:/\xf3/g,entity:"&oacute;"},{regex:/\xfa/g,entity:"&uacute;"}];for(var a in e)t=t.replace(e[a].regex,e[a].entity);return t}var E=function(){var t,e=(t=b,Object(i.useSelector)((function(e){return e.keplerGl[t]}))),a=Object(i.useSelector)((function(t){return t.keplerNoCode.originalHtmlTag})),n=Object(w.jsx)("div",{children:"Loading..."});if(e&&a){var o=y.a.getConfigToSave(e),r="<".concat(a.meta.tag,'\n    data-widget-type="kepler.gl"\n    data-mapbox-token="').concat(a.meta.mapboxToken,'"\n    data-width="').concat(a.meta.width,'"\n    data-height="').concat(a.meta.height,'"\n    data-vis-state="').concat(x(JSON.stringify(o.config.visState)),'"\n    data-map-state="').concat(x(JSON.stringify(o.config.mapState)),'"\n    data-map-style="').concat(x(JSON.stringify(o.config.mapStyle)),'"\n    onLoad="').concat(a.meta.onload,'"\n/>');n=Object(w.jsx)("code",{style:{whiteSpace:"pre"},children:r})}return Object(w.jsx)(g.StyledModalContent,{children:n})},k=function(){var t=Object(i.useSelector)((function(t){return t.keplerNoCode.modalDialog})),e=Object(w.jsx)("div",{children:"No active dialog"});return t.activeDialogId===n.HTML_TAG_SAVE&&(e=Object(w.jsx)(E,{})),Object(w.jsx)(g.Modal,{isOpen:t.isOpened,onCancel:function(){return function(){var t={type:v};h.dispatch(t)}()},children:Object(w.jsx)(g.StyledModalContent,{children:e})})},D=function(t){var e=function(t){var e=Object(g.SaveExportDropdownFactory)(Object(g.PanelHeaderDropdownFactory)()),a=Object(g.withState)([],(function(){var e,a,n,o;return{items:null===t||void 0===t||null===(e=t.sidePanel)||void 0===e||null===(a=e.header)||void 0===a||null===(n=a.share)||void 0===n||null===(o=n.dropdown)||void 0===o?void 0:o.buttons}}),{})(e);return Object(g.injectComponents)([[g.SaveExportDropdownFactory,function(){return a}]])}({sidePanel:{header:{share:{dropdown:{buttons:[{label:"toolbar.exportImage",icon:p.Icons.Picture,key:"image",onClick:function(t){return t.onExportImage}},{label:"toolbar.saveMap",icon:p.Icons.Save2,key:"save",onClick:function(){return function(){return function(t){var e={type:f,modalId:t};h.dispatch(e)}(n.HTML_TAG_SAVE)}}}]}}}}});return Promise.resolve().then((function(){h.dispatch(Object(S.addDataToMap)({datasets:t.dataSets,option:Object(r.a)({centerMap:!0,readOnly:!1},t.dataDisplayOptions||{}),config:{visState:t.keplerState.visState,mapStyle:t.keplerState.mapStyle,mapState:t.keplerState.mapState}})),function(t){var e={type:O,payload:t};h.dispatch(e)}(t.originalHtmlTagMeta)})),Object(w.jsxs)("div",{children:[Object(w.jsx)(e,{id:b,mapboxApiAccessToken:t.mapboxApiAccessToken,width:t.width,height:t.height}),Object(w.jsx)(k,{})]})},_=a(84),T=a.n(_),A=function(t,e){var a=Object(w.jsx)(i.Provider,{store:h,children:Object(w.jsx)(D,{mapboxApiAccessToken:e.mapboxApiAccessToken,width:e.width,height:e.height,dataSets:e.dataSets,dataDisplayOptions:e.dataDisplayOptions,originalHtmlTagMeta:e.originalHtmlTagMeta,keplerState:{uiState:e.uiState,visState:e.visState,mapState:e.mapState,mapStyle:e.mapStyle}})});T.a.render(a,t)},M=function(t){var e=null,a=null;try{e=JSON.parse(t)}catch(n){a=n}return[a,e]};(function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,1368)).then((function(e){var a=e.getCLS,n=e.getFID,o=e.getFCP,i=e.getLCP,r=e.getTTFB;a(t),n(t),o(t),i(t),r(t)}))})(console.log),window.initKepler=function(t,e){var a=t.dataset.mapboxToken;if(!a)throw new Error("Element ".concat(t.id,' has not "data-mapbox-token" attribute'));var n=t.dataset.width||"1600",i=Number.parseInt(n);if(!i&&i<0)throw new Error("Element ".concat(t.id,' attribute "data-width" has incorrect value, it should be positive integer'));var r=t.dataset.height||"800",c=Number.parseInt(r);if(!c&&c<0)throw new Error("Element ".concat(t.id,' attribute "data-height" has incorrect value, it should be positive integer'));var l=null;if(t.dataset.visState){var d=M(t.dataset.visState),s=Object(o.a)(d,2),u=s[0],p=s[1];if(u)throw new Error("Element ".concat(t.id,' has invalid "data-vis-state" attribute'));l=p}var g=null;if(t.dataset.mapState){var m=M(t.dataset.mapState),f=Object(o.a)(m,2),v=f[0],O=f[1];if(v)throw new Error("Element ".concat(t.id,' has invalid "data-map-state" attribute'));g=O}var h=null;if(t.dataset.mapStyle){var b=M(t.dataset.mapStyle),S=Object(o.a)(b,2),j=S[0],y=S[1];if(j)throw new Error("Element ".concat(t.id,' has invalid "data-map-style" attribute'));h=y}var w=t.onload.toString(),x=w.substring(w.indexOf("{")+1,w.lastIndexOf("}")).replace(/\n/g,"");A(t,{mapboxApiAccessToken:a,width:i,height:c,visState:l,mapState:g,mapStyle:h,dataSets:e,originalHtmlTagMeta:{tag:t.tagName,mapboxToken:a,width:i,height:c,onload:x}})},document.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll("[data-widget-type='kepler.gl']").forEach((function(t){return t.onload()}))})),window.processModeAnalyticsDatasets=function(t){return t.map((function(t){var e=t.content;return{info:{label:t.queryName,id:t.query_token},data:Object(m.getFieldsFromData)(e)}}))},window.processCsvData=m.processCsvData,window.getFieldsFromData=m.getFieldsFromData,window.processGeojson=m.processGeojson,window.processKeplerglJSON=m.processKeplerglJSON},308:function(t,e){},309:function(t,e){},311:function(t,e){},520:function(t,e){},521:function(t,e){},522:function(t,e){},523:function(t,e){},524:function(t,e){},525:function(t,e){},526:function(t,e){},558:function(t,e){},559:function(t,e){},560:function(t,e){},796:function(t,e){},797:function(t,e){},798:function(t,e){},799:function(t,e){},950:function(t,e){},983:function(t,e,a){var n={"./":40,"./ca":595,"./ca.js":595,"./cn":596,"./cn.js":596,"./en":432,"./en.js":432,"./es":597,"./es.js":597,"./fi":598,"./fi.js":598,"./formatted-message":433,"./formatted-message.js":433,"./index":40,"./index.js":40,"./ja":599,"./ja.js":599,"./locales":117,"./locales.js":117,"./pt":600,"./pt.js":600,"./ru":601,"./ru.js":601};function o(t){var e=i(t);return a(e)}function i(t){if(!a.o(n,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return n[t]}o.keys=function(){return Object.keys(n)},o.resolve=i,t.exports=o,o.id=983}},[[1322,1,2]]]);
//# sourceMappingURL=main.75e51ed7.chunk.js.map